@keyframes fadeInUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes pulse{0%,to{opacity:.6}50%{opacity:1}}@keyframes fadeInMessage{0%{opacity:0;transform:translateY(10px) scale(1.02)}to{opacity:1;transform:translateY(0) scale(1.02)}}@keyframes fadeInThought{0%{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}@keyframes fadeInBackdrop{0%{opacity:0}to{opacity:1}}@keyframes slideUpModal{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes spin{to{transform:rotate(360deg)}}.dialogue-player{display:flex;flex-direction:column;width:100%;max-width:800px;min-height:500px;height:auto;margin:0 auto;background:#fff;border-radius:12px;box-shadow:0 4px 20px rgba(0,0,0,.08);overflow:hidden;scroll-margin-top:20px}.dialogue-player__header{padding:16px 20px;background:linear-gradient(135deg,#b85c3c 0,#d4a574 100%);color:#fff;min-height:auto;text-shadow:0 1px 2px rgba(0,0,0,.1)}.dialogue-player__topic{margin:0 0 8px;font-weight:600;text-shadow:inherit}.dialogue-player__topic-en,.dialogue-player__topic-zh{display:block;overflow:visible;text-overflow:clip;word-break:break-word}.dialogue-player__topic-zh{font-size:clamp(.95rem,2.8vw,1.1rem);font-weight:600;line-height:1.3}.dialogue-player__topic-en{font-size:clamp(.8rem,2.3vw,.9rem);opacity:.9;margin-top:4px;line-height:1.4}.dialogue-player__participants{font-size:.8rem;opacity:.85;display:flex;align-items:center;gap:6px;flex-wrap:wrap;margin-top:4px;text-shadow:inherit}.dialogue-player__participant{padding:3px 10px;background:rgba(255,255,255,.2);border-radius:12px;backdrop-filter:blur(10px);font-size:.75rem}.dialogue-player__messages{min-height:400px;max-height:600px;flex:1 1 auto;padding:24px;overflow-y:auto;background:#f9fafb;position:relative}.dialogue-player__messages::-webkit-scrollbar{width:8px}.dialogue-player__messages::-webkit-scrollbar-track{background:#e5e7eb;border-radius:4px}.dialogue-player__messages::-webkit-scrollbar-thumb{background:#9ca3af;border-radius:4px}.dialogue-player__messages::-webkit-scrollbar-thumb:hover{background:#6b7280}.dialogue-message{margin-bottom:16px;padding:16px;background:#fff;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.05);transition:all .3s cubic-bezier(.4,0,.2,1);will-change:opacity,transform}.dialogue-message.message-hidden{opacity:0;transform:translateY(10px);transition:none}.dialogue-message.message-hidden.future{opacity:.4;transform:translateY(0)}.dialogue-message.message-appearing{animation:fadeInUp .4s ease-out forwards}.dialogue-message.current,.dialogue-message.past{opacity:.4;transition:opacity .3s ease-out,transform .3s ease-out}.dialogue-message.current{opacity:1;transform:scale(1.02);box-shadow:0 4px 16px rgba(184,92,60,.2);animation:fadeInMessage .5s ease-out}.dialogue-message.future{display:block;position:relative;opacity:.6;transition:opacity .3s ease-out}.dialogue-message.future .interaction-badge,.dialogue-message.future .message-content{display:none!important}.dialogue-message.future::after{content:"生成中...";position:absolute;top:12px;right:16px;padding:4px 12px;background:rgba(184,92,60,.15);border-radius:12px;font-size:.75rem;font-weight:500;color:#b85c3c;animation:pulse 1.5s ease-in-out infinite;z-index:10}[data-lang=en] .dialogue-message.future::after{content:"Generating..."}.thought-chain{padding:16px 20px;min-height:60px;display:flex;align-items:center;font-size:.875rem;color:#6b7280;font-style:italic;line-height:1.5}.thought-chain-item{opacity:0;transition:opacity .4s ease-in-out}.thought-chain-item.active{opacity:1;animation:fadeInThought .4s ease-in-out}.dialogue-message:hover{box-shadow:0 4px 12px rgba(0,0,0,.1);transform:translateY(-2px)}.message-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px;gap:12px}.message-author{font-weight:600;font-size:.95rem}.interaction-badge{display:inline-block;padding:4px 10px;border-radius:8px;font-size:.75rem;font-weight:500;text-transform:uppercase;letter-spacing:.5px;background:#e5e7eb;color:#374151}.interaction-badge.initial{background:#eef2ff;color:#6366f1;border:1px solid #c7d2fe}.interaction-badge.agree-extend{background:#f0fdf4;color:#22c55e;border:1px solid #bbf7d0}.interaction-badge.question-challenge{background:#fefce8;color:#eab308;border:1px solid #fde047}.interaction-badge.synthesize{background:#faf5ff;color:#8b5cf6;border:1px solid #e9d5ff}.interaction-badge.counter{background:#fef2f2;color:#ef4444;border:1px solid #fecaca}.interaction-badge.reflect{background:#eff6ff;color:#3b82f6;border:1px solid #bfdbfe}.message-content{font-size:.95rem;line-height:1.6;color:#374151;word-wrap:break-word;overflow-wrap:break-word;hyphens:auto}.message-content p{margin:0 0 8px}.message-content p:last-child{margin-bottom:0}.quote-ref{display:inline-block;font-size:.875rem;font-style:italic;color:#6b7280;cursor:pointer;margin-bottom:8px;padding:4px 8px;border-radius:4px;transition:background-color .2s ease;position:relative}.quote-ref:hover{background-color:#f3f4f6}.quote-ref-author{font-weight:600;font-style:normal}@media (hover:hover) and (pointer:fine){.quote-ref-tooltip{display:none;position:absolute;bottom:100%;left:0;margin-bottom:8px;padding:12px 16px;min-width:200px;max-width:400px;width:max-content;background:#fff;border:1px solid #e5e7eb;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,.15);z-index:100;white-space:normal;font-style:normal;text-align:left}.quote-ref:hover .quote-ref-tooltip{display:block;animation:fadeInTooltip 200ms ease-out}@keyframes fadeInTooltip{0%{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}.quote-ref-tooltip::after{content:"";position:absolute;top:100%;left:20px;border:6px solid transparent;border-top-color:#fff;filter:drop-shadow(0 1px 1px rgba(0,0,0,.1))}.quote-ref-tooltip cite{display:block;font-weight:600;font-size:.9rem;margin-bottom:8px;font-style:normal}.quote-ref-tooltip p{font-size:.875rem;line-height:1.6;color:#374151;margin:0;text-align:left;word-wrap:break-word;white-space:normal}}.quote-modal-backdrop{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:1000;display:none;align-items:center;justify-content:center;animation:fadeInBackdrop 300ms ease-out}.quote-modal-backdrop.active{display:flex}.quote-modal{position:relative;background:#fff;border-radius:12px;padding:24px;max-width:90%;max-height:80vh;overflow-y:auto;box-shadow:0 8px 24px rgba(0,0,0,.2);animation:slideUpModal 300ms ease-out}.quote-modal-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}.quote-modal-close{width:32px;height:32px;background:#f3f4f6;border:0;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:1.5rem;line-height:1;color:#6b7280;transition:background .2s ease;flex-shrink:0}.quote-modal-close:hover{background:#e5e7eb}.quote-modal-body blockquote{margin:0;padding:0;border:0}.message-quote cite,.quote-modal-body cite{display:block;font-style:normal;font-weight:600}.quote-modal-body cite{font-size:1rem;margin-bottom:12px}.quote-modal-body p{font-size:.95rem;line-height:1.6;color:#374151;margin:0}@media (hover:none) or (pointer:coarse){.quote-ref-tooltip{display:none!important}}.message-quote{margin:0 0 12px;padding:12px 16px;background:#f3f4f6;border-left:4px solid #9ca3af;border-radius:4px;font-size:.875rem;color:#6b7280}.message-quote cite{margin-bottom:4px}.message-quote p{margin:0;font-style:italic}.dialogue-player__controls{padding:16px 24px;background:#f9fafb;border-top:1px solid #e5e7eb;min-height:70px;display:flex;flex-direction:column;gap:12px}.mode-toggle-container{display:flex;flex-direction:column;gap:8px;padding-bottom:12px;border-bottom:1px solid #e5e7eb}.mode-toggle-label{font-size:.85rem;font-weight:600;color:#6b7280;text-transform:uppercase;letter-spacing:.5px}.mode-toggle-btn,.mode-toggle-buttons{display:flex;gap:8px}.mode-toggle-btn{flex:1;padding:10px 16px;background:#f3f4f6;color:#374151;border:2px solid #e5e7eb;border-radius:8px;font-size:.9rem;font-weight:500;cursor:pointer;transition:all .2s ease;align-items:center;justify-content:center}.mode-toggle-btn:hover{background:#e5e7eb;border-color:#9ca3af;transform:translateY(-1px)}.mode-toggle-btn:active{transform:translateY(0)}.mode-toggle-btn.active{background:linear-gradient(135deg,#b85c3c 0,#d4a574 100%);color:#fff;border-color:#b85c3c;box-shadow:0 2px 8px rgba(184,92,60,.3)}.mode-toggle-btn.active:hover{background:linear-gradient(135deg,#a04b2f 0,#c57158 100%);border-color:#a04b2f}.playback-controls{display:flex;flex-direction:column;gap:16px}.control-button,.controls-row{display:flex;align-items:center;gap:12px}.control-button{padding:10px 20px;background:#b85c3c;color:#fff;border:0;border-radius:8px;font-size:.95rem;font-weight:500;cursor:pointer;transition:all .2s ease;gap:8px}.control-button:hover{background:#a04b2f;transform:translateY(-1px);box-shadow:0 4px 12px rgba(184,92,60,.3)}.control-button:active{transform:translateY(0)}.control-button:disabled{background:#d1d5db;cursor:not-allowed;transform:none}.speed-selector{padding:8px 12px;border:2px solid #e5e7eb;border-radius:8px;font-size:.9rem;background:#fff;cursor:pointer;transition:border-color .2s ease}.speed-selector:hover{border-color:#b85c3c}.speed-selector:focus{outline:0;border-color:#b85c3c;box-shadow:0 0 0 3px rgba(184,92,60,.1)}.timeline-container{display:flex;flex-direction:column;gap:8px}.timeline-scrubber{width:100%;height:6px;border-radius:3px;background:#e5e7eb;outline:0;-webkit-appearance:none;appearance:none;cursor:pointer}.timeline-scrubber::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:16px;height:16px;border-radius:50%;background:#b85c3c;cursor:pointer;transition:all .2s ease}.timeline-scrubber::-webkit-slider-thumb:hover{background:#a04b2f;transform:scale(1.2)}.timeline-scrubber::-moz-range-thumb{width:16px;height:16px;border:0;border-radius:50%;background:#b85c3c;cursor:pointer;transition:all .2s ease}.timeline-scrubber::-moz-range-thumb:hover{background:#a04b2f;transform:scale(1.2)}.time-display{display:flex;justify-content:space-between;font-size:.8rem;color:#6b7280;font-variant-numeric:tabular-nums}@media (max-width:767px){.dialogue-player{min-height:400px}.dialogue-player__messages{min-height:300px;max-height:400px}}@media (min-width:768px) and (max-width:1023px){.dialogue-player__messages{min-height:350px;max-height:500px}}@media (max-width:768px){.dialogue-player{border-radius:0}.dialogue-player__header{padding:14px 16px}.dialogue-player__topic{margin-bottom:6px}.dialogue-player__messages{padding:16px;max-height:400px}.dialogue-message{padding:12px}.message-header{flex-direction:column;align-items:flex-start;gap:8px}.dialogue-player__controls{padding:16px}.mode-toggle-label{font-size:.8rem}.mode-toggle-btn{font-size:.85rem;padding:8px 12px}.controls-row{flex-direction:column;width:100%}.control-button,.speed-selector{width:100%}}@media (max-width:480px){.dialogue-player__topic{font-size:1.1rem}.dialogue-player__topic-en{font-size:.95rem}.dialogue-player__participants{font-size:.8rem}.message-content{font-size:.9rem}.dialogue-player__messages{max-height:300px}.dialogue-player.compact-mode .dialogue-player__messages{max-height:30vh;font-size:.8rem}.dialogue-player.compact-mode .dialogue-player__header{padding:10px 14px}.dialogue-player.compact-mode .dialogue-player__topic{font-size:.95rem;margin-bottom:4px}.dialogue-player.compact-mode .dialogue-message{padding:10px;margin-bottom:12px}.dialogue-player.compact-mode .message-content,.dialogue-player.compact-mode .message-header{font-size:.85rem}.dialogue-player.compact-mode .replay-btn,.dialogue-player.compact-mode .timeline-container{display:none}.dialogue-player.compact-mode .controls-row{flex-direction:row;gap:8px}.dialogue-player.compact-mode .control-button{flex:1;padding:8px 12px;font-size:.85rem}.dialogue-player.compact-mode .speed-selector{flex:0 0 auto;width:auto;min-width:70px;padding:8px;font-size:.85rem}}@media (prefers-color-scheme:dark){.dialogue-player{background:#1f2937}.dialogue-player__messages{background:#111827}.dialogue-message{background:#1f2937;box-shadow:0 2px 8px rgba(0,0,0,.3)}.message-content{color:#d1d5db}.message-quote{background:#374151;border-left-color:#6b7280;color:#9ca3af}.dialogue-player__controls{background:#1f2937;border-top-color:#374151}.speed-selector{border-color:#4b5563;color:#d1d5db}.speed-selector,.timeline-scrubber{background:#374151}.time-display{color:#9ca3af}}.dialogue-player-error,.dialogue-player-loading{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;color:#6b7280}.dialogue-player-loading .spinner{width:40px;height:40px;border:4px solid #e5e7eb;border-top-color:#b85c3c;border-radius:50%;animation:spin .8s linear infinite;margin-bottom:16px}.dialogue-player-loading p{font-size:.95rem;margin:0}.dialogue-player-error{padding:40px;text-align:center}.dialogue-player-error .error-icon{font-size:3rem;margin-bottom:16px}.dialogue-player-error h3{font-size:1.25rem;font-weight:600;color:#374151;margin:0 0 8px}.dialogue-player-error .error-message{font-size:.95rem;margin:0 0 24px;max-width:400px}.dialogue-player-error .error-retry-btn{padding:10px 20px;background:#b85c3c;color:#fff;border:0;border-radius:8px;cursor:pointer;transition:background .2s ease}.dialogue-player-error .error-retry-btn:hover{background:#a04b2f}