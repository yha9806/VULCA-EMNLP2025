!function(){"use strict";function e(){try{if(void 0===window.VULCA_DATA||!window.VULCA_DATA.personas)return console.error("[Critics Page] VULCA_DATA.personas not found"),void n("数据加载失败，请刷新页面。");const e=document.getElementById("critics-grid");if(!e)return void console.error("[Critics Page] #critics-grid container not found");e.innerHTML="";const a=window.VULCA_DATA.personas;if(!a||0===a.length)return void(e.innerHTML='<p class="no-critics">没有评论家数据</p>');a.forEach((n,a)=>{try{const a=t(n);a&&e.appendChild(a)}catch(e){console.error(`[Critics Page] Error rendering card for ${n.nameZh}:`,e)}}),console.log(`[Critics Page] Rendered ${a.length} critic cards`)}catch(e){console.error("[Critics Page] Fatal error rendering critics:",e),n("页面加载出错，请刷新。")}}function t(e){if(!e||!e.nameZh)return console.warn("[Critics Page] Invalid persona object:",e),null;if(!e.rpait||"object"!=typeof e.rpait)return console.error(`[Critics Page] Missing or invalid rpait for ${e.nameZh}`),null;const t=document.createElement("article");t.className="critic-card",t.setAttribute("data-critic-id",e.id);const n=e.color||"#999999";t.style.setProperty("--critic-color",n);const a=function(e,t){const n=document.createElement("div");n.className="critic-card-header",n.style.borderLeftColor=t;const a=document.createElement("h2");a.className="critic-name";const c=document.createElement("span");c.className="critic-name-zh",c.lang="zh",c.textContent=e.nameZh;const r=document.createElement("span");r.className="critic-name-en",r.lang="en",r.textContent=e.nameEn||"",a.appendChild(c),a.appendChild(r);const i=document.createElement("p");i.className="critic-period";const o=document.createElement("span");o.lang="zh",o.textContent=e.period||e.periodZh||e.era||"";const d=document.createElement("span");return d.lang="en",d.textContent=e.periodEn||e.period||e.era||"",i.appendChild(o),i.appendChild(d),n.appendChild(a),(o.textContent||d.textContent)&&n.appendChild(i),n}(e,n),c=function(e){const t=document.createElement("div");t.className="critic-card-body";const n=e.bioZh||e.bio,a=e.bioEn||e.bio;if(n||a){const e=document.createElement("p");e.className="critic-bio";const c=document.createElement("span");c.lang="zh",c.textContent=n||"";const r=document.createElement("span");r.lang="en",r.textContent=a||"",e.appendChild(c),e.appendChild(r),t.appendChild(e)}const c=function(e,t){const n=document.createElement("div");return n.className="rpait-grid",[{key:"R",label:"Representation",labelZh:"代表性"},{key:"P",label:"Philosophicality",labelZh:"哲学性"},{key:"A",label:"Aesthetics",labelZh:"美学性"},{key:"I",label:"Interpretability",labelZh:"诠释性"},{key:"T",label:"Technicality",labelZh:"技巧性"}].forEach(a=>{const c=e[a.key]||0,r=Math.max(1,Math.min(10,parseInt(c)||0)),i=document.createElement("div");i.className="rpait-bar",i.setAttribute("data-dimension",a.key);const o=document.createElement("div");o.className="rpait-label";const d=document.createElement("abbr");d.setAttribute("title",`${a.labelZh} / ${a.label}`),d.textContent=a.key;const l=document.createElement("span");l.className="score",l.textContent=`${r}/10`,o.appendChild(d),o.appendChild(l);const s=document.createElement("div");s.className="rpait-bar-bg";const p=document.createElement("div");p.className="rpait-bar-fill",p.style.width=r/10*100+"%",p.style.backgroundColor=t||"#4a90a4",s.appendChild(p),i.appendChild(o),i.appendChild(s),n.appendChild(i)}),n}(e.rpait,e.color);return t.appendChild(c),t}(e);return t.appendChild(a),t.appendChild(c),t}function n(e){const t=document.getElementById("critics-grid");t&&(t.innerHTML=`<div class="error-message">${e}</div>`)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{e(),document.addEventListener("langchange",()=>{console.log("[Critics Page] Language changed, re-rendering..."),e()})}):(e(),document.addEventListener("langchange",()=>{console.log("[Critics Page] Language changed, re-rendering..."),e()})),window.CriticsPage={renderCritics:e,createCriticCard:t}}();