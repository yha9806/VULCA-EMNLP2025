window.ArtworkCarousel=function(){"use strict";class t{constructor(t,r,e){this.artworks=t||[],this.critiques=r||[],this.personas=e||[],this.currentIndex=0,this.listeners={},console.log(`✓ Carousel initialized with ${this.artworks.length} artworks`)}next(){return this.currentIndex=(this.currentIndex+1)%this.artworks.length,this._notifyListeners("navigate"),this.getCurrentArtwork()}prev(){return this.currentIndex=(this.currentIndex-1+this.artworks.length)%this.artworks.length,this._notifyListeners("navigate"),this.getCurrentArtwork()}goTo(t){return t<0||t>=this.artworks.length?(console.warn(`⚠ Invalid artwork index: ${t}`),null):(this.currentIndex=t,this._notifyListeners("navigate"),this.getCurrentArtwork())}jumpToArtwork(t){const r=this.artworks.findIndex(r=>r.id===t);return-1===r?(console.warn(`⚠ Artwork not found: ${t}`),null):(console.log(`✓ Jumping to artwork: ${t} (index ${r})`),this.goTo(r))}getCurrentArtwork(){return this.artworks[this.currentIndex]||null}getCurrentIndex(){return this.currentIndex}getArtworkCount(){return this.artworks.length}getArtworkCritiques(){const t=this.getCurrentArtwork();return t&&this.critiques.filter(r=>r.artworkId===t.id)||[]}getCritiqueForArtwork(t,r){const e=this.artworks[t];return e&&this.critiques.filter(t=>t.artworkId===e.id)[r]||null}on(t,r){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(r)}off(t,r){this.listeners[t]&&(this.listeners[t]=this.listeners[t].filter(t=>t!==r))}_notifyListeners(t){if(!this.listeners[t])return;const r=this.getCurrentArtwork(),e=this.getArtworkCritiques();this.listeners[t].forEach(t=>{t({artwork:r,index:this.currentIndex,critics:e})}),"navigate"===t&&r&&window.dispatchEvent(new CustomEvent("visualization:update",{detail:{artworkId:r.id,artworkIndex:this.currentIndex,artwork:r}}))}}function r(){const r=window.VULCA_DATA;if(!(r&&r.artworks&&r.critiques&&r.personas))return console.error("❌ VULCA_DATA not found or incomplete"),null;const e=new t(r.artworks,r.critiques,r.personas);window.carousel=e,console.log(`✓ Carousel initialized with ${r.artworks.length} artworks`);const n=new URLSearchParams(window.location.search).get("artwork");return n&&(console.log(`✓ URL parameter detected: artwork=${n}`),setTimeout(()=>{e.jumpToArtwork(n)},100)),e}function e(){window.VULCA_DATA_READY?r():document.addEventListener("vulca-data-ready",r,{once:!0})}return"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e(),t}(),console.log("✓ Carousel module loaded");