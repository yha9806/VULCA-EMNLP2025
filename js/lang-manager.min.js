class LanguageManager{constructor(){this.defaultLang="zh",this.storageKey="preferred-lang",this.validLangs=["zh","en"]}getCurrentLanguage(){const e=new URLSearchParams(window.location.search).get("lang");if(e&&this.validLangs.includes(e))return e;const a=localStorage.getItem(this.storageKey);return a&&this.validLangs.includes(a)?a:this.defaultLang}setLanguage(e,a=!0){this.validLangs.includes(e)?(document.documentElement.setAttribute("data-lang",e),a&&localStorage.setItem(this.storageKey,e),this.updateToggleButton(e),"function"==typeof window.updateMenuLanguage&&window.updateMenuLanguage(e),"function"==typeof window.updateMetaTags&&window.updateMetaTags(e),document.dispatchEvent(new CustomEvent("langchange",{detail:{lang:e}})),console.log(`[LangManager] Language set to: ${e}`)):console.error(`[LangManager] Invalid language: ${e}`)}initialize(){const e=this.getCurrentLanguage(),a=new URLSearchParams(window.location.search).has("lang");this.setLanguage(e,!a),this.updateToggleButton(e)}updateToggleButton(e){const a=document.getElementById("lang-toggle");if(a){const n=a.querySelector(".lang-text");n&&(n.textContent="zh"===e?"EN":"中")}}}if("loading"===document.readyState)document.addEventListener("DOMContentLoaded",()=>{const e=new LanguageManager;e.initialize(),window.langManager=e});else{const e=new LanguageManager;e.initialize(),window.langManager=e}console.log("✓ Language Manager loaded");