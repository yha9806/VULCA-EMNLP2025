<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VULCA Multi-Image Demo | å¤šå›¾ç‰‡ç³»ç»Ÿæ¼”ç¤º</title>

  <!-- Load styles -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:wght@400;600;700&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/styles/main.css?v=4">

  <style>
    body {
      background: var(--color-bg);
      font-family: var(--font-sans);
    }

    .demo-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 60px 20px;
      text-align: center;
      margin-bottom: 40px;
    }

    .demo-header h1 {
      font-family: var(--font-serif);
      font-size: clamp(32px, 6vw, 56px);
      margin: 0 0 20px 0;
    }

    .demo-header p {
      font-size: clamp(14px, 2vw, 18px);
      opacity: 0.95;
      max-width: 800px;
      margin: 0 auto;
    }

    .demo-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px 80px;
    }

    .demo-section {
      background: white;
      border-radius: 12px;
      padding: 40px;
      margin-bottom: 40px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .demo-section h2 {
      font-family: var(--font-serif);
      font-size: clamp(24px, 4vw, 36px);
      color: var(--color-text);
      margin: 0 0 10px 0;
      border-bottom: 3px solid #667eea;
      padding-bottom: 15px;
    }

    .demo-section h3 {
      font-family: var(--font-sans);
      font-size: clamp(18px, 3vw, 24px);
      color: var(--color-text);
      margin: 30px 0 15px 0;
    }

    .demo-section p {
      font-size: 16px;
      line-height: 1.8;
      color: var(--color-text-light);
      margin: 15px 0;
    }

    .critique-item {
      border-left: 4px solid var(--color-persona-suShi);
      padding: 20px;
      margin: 20px 0;
      background: #f9f9f9;
      border-radius: 4px;
    }

    .critique-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      flex-wrap: wrap;
      gap: 10px;
    }

    .critique-author {
      font-weight: 600;
      font-size: 18px;
      color: var(--color-text);
    }

    .critique-period {
      font-size: 14px;
      color: var(--color-text-light);
    }

    .critique-text {
      font-size: 15px;
      line-height: 1.9;
      color: var(--color-text);
    }

    .image-reference-link {
      color: #2196F3;
      text-decoration: none;
      border-bottom: 2px solid rgba(33, 150, 243, 0.3);
      padding: 2px 4px;
      border-radius: 3px;
      transition: all 200ms;
      cursor: pointer;
      font-weight: 600;
    }

    .image-reference-link:hover {
      background: rgba(33, 150, 243, 0.1);
      border-bottom-color: #2196F3;
    }

    .features-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin: 30px 0;
    }

    .feature-card {
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      padding: 20px;
      background: white;
      transition: all 200ms;
    }

    .feature-card:hover {
      border-color: #667eea;
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
      transform: translateY(-4px);
    }

    .feature-card h4 {
      margin: 0 0 10px 0;
      color: var(--color-text);
      font-size: 18px;
    }

    .feature-card p {
      margin: 0;
      font-size: 14px;
      color: var(--color-text-light);
    }

    .feature-icon {
      font-size: 32px;
      margin-bottom: 10px;
    }

    .stats {
      display: flex;
      gap: 30px;
      flex-wrap: wrap;
      margin: 30px 0;
    }

    .stat-item {
      flex: 1;
      min-width: 150px;
      text-align: center;
    }

    .stat-number {
      font-size: 48px;
      font-weight: 700;
      color: #667eea;
      font-family: var(--font-serif);
    }

    .stat-label {
      font-size: 14px;
      color: var(--color-text-light);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .code-block {
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 20px;
      border-radius: 8px;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 14px;
      overflow-x: auto;
      margin: 20px 0;
    }

    .highlight {
      background: rgba(102, 126, 234, 0.1);
      padding: 2px 6px;
      border-radius: 3px;
      font-weight: 600;
    }

    @media (max-width: 768px) {
      .demo-section {
        padding: 25px;
      }

      .stats {
        gap: 15px;
      }

      .stat-number {
        font-size: 36px;
      }
    }
  </style>
</head>
<body>
  <div class="demo-header">
    <h1>ğŸ¨ VULCA Multi-Image System Demo</h1>
    <p>å¤šå›¾ç‰‡è‰ºæœ¯å±•ç¤ºç³»ç»Ÿ | å®Œæ•´åŠŸèƒ½æ¼”ç¤º</p>
  </div>

  <div class="demo-container">
    <!-- Introduction Section -->
    <section class="demo-section">
      <h2>ğŸ“– ç³»ç»Ÿæ¦‚è¿°</h2>
      <p>
        VULCA å¤šå›¾ç‰‡ç³»ç»Ÿæ˜¯ä¸€ä¸ªå®Œæ•´çš„è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒæ¯ä»¶è‰ºæœ¯ä½œå“å±•ç¤º 5-10 å¼ å›¾ç‰‡ï¼Œ
        å¹¶å…è®¸è¯„è®ºå®¶åœ¨æ–‡æœ¬ä¸­å¼•ç”¨ç‰¹å®šå›¾ç‰‡ã€‚è¯¥ç³»ç»ŸåŒ…å«ä¸‰ä¸ªä¸»è¦ç»„ä»¶ï¼š
      </p>

      <div class="features-grid">
        <div class="feature-card">
          <div class="feature-icon">ğŸ“Š</div>
          <h4>å¤šå›¾ç‰‡æ•°æ®ç»“æ„</h4>
          <p>æ”¯æŒæ¯ä»¶ä½œå“ 1-10 å¼ å›¾ç‰‡ï¼Œå¸¦æœ‰åˆ†ç±»ã€åºå·ã€æ ‡é¢˜ç­‰ä¸°å¯Œå…ƒæ•°æ®</p>
        </div>

        <div class="feature-card">
          <div class="feature-icon">ğŸ </div>
          <h4>äº¤äº’å¼ Carousel</h4>
          <p>å®Œæ•´çš„å›¾ç‰‡è½®æ’­ç»„ä»¶ï¼Œæ”¯æŒé”®ç›˜ã€è§¦æ‘¸ã€é¼ æ ‡å¯¼èˆª</p>
        </div>

        <div class="feature-card">
          <div class="feature-icon">ğŸ”—</div>
          <h4>æ··åˆè¯„è®ºç³»ç»Ÿ</h4>
          <p>è¯„è®ºå¯å¼•ç”¨ç‰¹å®šå›¾ç‰‡ï¼Œç‚¹å‡»å¼•ç”¨é“¾æ¥å¯¼èˆªåˆ°å¯¹åº”å›¾ç‰‡</p>
        </div>

        <div class="feature-card">
          <div class="feature-icon">â™¿</div>
          <h4>æ— éšœç¢è®¾è®¡</h4>
          <p>ARIA å±æ€§ã€é”®ç›˜å¯¼èˆªã€å±å¹•é˜…è¯»å™¨æ”¯æŒ</p>
        </div>

        <div class="feature-card">
          <div class="feature-icon">ğŸ“±</div>
          <h4>å“åº”å¼è®¾è®¡</h4>
          <p>é€‚é… Desktopã€Tabletã€Mobile ä¸‰ç§æ–­ç‚¹</p>
        </div>

        <div class="feature-card">
          <div class="feature-icon">âš¡</div>
          <h4>æ€§èƒ½ä¼˜åŒ–</h4>
          <p>æ‡’åŠ è½½ã€å›¾ç‰‡é¢„åŠ è½½ã€è¿‡æ¸¡åŠ¨ç”»ä¼˜åŒ–</p>
        </div>
      </div>
    </section>

    <!-- Carousel Demo Section -->
    <section class="demo-section">
      <h2>ğŸ  Carousel ç»„ä»¶æ¼”ç¤º</h2>
      <p>å®Œæ•´çš„å›¾ç‰‡è½®æ’­åŠŸèƒ½ï¼Œå±•ç¤ºä½œå“çš„å¤šä¸ªè§†è§’ã€‚</p>

      <div id="carousel-demo-container" style="margin: 30px 0;"></div>

      <h3>åŠŸèƒ½ç‰¹æ€§ï¼š</h3>
      <ul>
        <li>âœ… <strong>å¯¼èˆªæ§ä»¶</strong>ï¼šPrev/Next æŒ‰é’® + Indicator ç‚¹</li>
        <li>âœ… <strong>é”®ç›˜æ”¯æŒ</strong>ï¼šæ–¹å‘é”®ã€Homeã€End é”®</li>
        <li>âœ… <strong>è§¦æ‘¸æ‰‹åŠ¿</strong>ï¼šå·¦å³æ»‘åŠ¨åˆ‡æ¢å›¾ç‰‡</li>
        <li>âœ… <strong>å…ƒæ•°æ®æ˜¾ç¤º</strong>ï¼šåˆ†ç±»å¾½ç« ã€å›¾ç‰‡æ ‡é¢˜ã€è¯´æ˜æ–‡å­—</li>
        <li>âœ… <strong>æ‡’åŠ è½½</strong>ï¼šé¢„åŠ è½½å½“å‰ + ç›¸é‚»å›¾ç‰‡</li>
        <li>âœ… <strong>é«˜äº®æ”¯æŒ</strong>ï¼šè¯„è®ºå¼•ç”¨çš„å›¾ç‰‡æ˜¾ç¤ºé‡‘è‰²æ ‡è®°</li>
      </ul>
    </section>

    <!-- Critique Reference Demo Section -->
    <section class="demo-section">
      <h2>ğŸ”— å›¾ç‰‡å¼•ç”¨ç³»ç»Ÿæ¼”ç¤º</h2>
      <p>è¯„è®ºå®¶å¯ä»¥åœ¨æ–‡æœ¬ä¸­ä½¿ç”¨ <span class="highlight">[img:id]</span> è¯­æ³•å¼•ç”¨ç‰¹å®šå›¾ç‰‡ã€‚</p>

      <h3>è¯­æ³•ç¤ºä¾‹ï¼š</h3>
      <div class="code-block">å¦‚[img:img-1-1]æ‰€ç¤ºï¼Œæ­¤ä½œå“å±•ç°äº†ç¬”å¢¨ä¸æœºå™¨çš„å¯¹è¯ã€‚</div>

      <h3>æ¸²æŸ“ç»“æœï¼š</h3>
      <div class="critique-item">
        <div class="critique-header">
          <span class="critique-author">è‹è½¼</span>
          <span class="critique-period">åŒ—å®‹æ–‡äºº (1037-1101)</span>
        </div>
        <div class="critique-text" id="critique-demo-text">
          <!-- Will be rendered by CritiqueParser -->
        </div>
      </div>

      <h3>å·¥ä½œåŸç†ï¼š</h3>
      <ol>
        <li>ç³»ç»Ÿè‡ªåŠ¨è§£æè¯„è®ºæ–‡æœ¬ä¸­çš„ <code>[img:id]</code> æ¨¡å¼</li>
        <li>éªŒè¯å›¾ç‰‡ ID æ˜¯å¦å­˜åœ¨äºä½œå“çš„ images æ•°ç»„ä¸­</li>
        <li>å°†æœ‰æ•ˆå¼•ç”¨è½¬æ¢ä¸ºå¯ç‚¹å‡»çš„ HTML é“¾æ¥</li>
        <li>ç‚¹å‡»é“¾æ¥æ—¶ï¼ŒCarousel å¯¼èˆªåˆ°å¯¹åº”å›¾ç‰‡å¹¶é«˜äº®æ˜¾ç¤º</li>
      </ol>
    </section>

    <!-- Implementation Stats Section -->
    <section class="demo-section">
      <h2>ğŸ“ˆ å®æ–½ç»Ÿè®¡</h2>

      <div class="stats">
        <div class="stat-item">
          <div class="stat-number">3</div>
          <div class="stat-label">æ ¸å¿ƒç»„ä»¶</div>
        </div>

        <div class="stat-item">
          <div class="stat-number">16</div>
          <div class="stat-label">å·²å®Œæˆä»»åŠ¡</div>
        </div>

        <div class="stat-item">
          <div class="stat-number">4000+</div>
          <div class="stat-label">ä»£ç è¡Œæ•°</div>
        </div>

        <div class="stat-item">
          <div class="stat-number">100%</div>
          <div class="stat-label">æµ‹è¯•é€šè¿‡ç‡</div>
        </div>
      </div>

      <h3>ä»£ç æ¨¡å—ï¼š</h3>
      <ul>
        <li><code>js/utils/image-compat.js</code> - å‘åå…¼å®¹åŠ©æ‰‹ (151 è¡Œ)</li>
        <li><code>js/utils/critique-parser.js</code> - å›¾ç‰‡å¼•ç”¨è§£æå™¨ (332 è¡Œ)</li>
        <li><code>js/components/artwork-carousel.js</code> - Carousel ç»„ä»¶ (682 è¡Œ)</li>
        <li><code>styles/main.css</code> - Carousel æ ·å¼ (+427 è¡Œ)</li>
        <li><code>js/data.js</code> - è‡ªåŠ¨æå– imageReferences (+45 è¡Œ)</li>
      </ul>

      <h3>æ–‡æ¡£èµ„æºï¼š</h3>
      <ul>
        <li>ğŸ“„ <code>docs/ADDING_ARTWORKS.md</code> - ä½œå“æ·»åŠ æŒ‡å— (421 è¡Œ)</li>
        <li>ğŸ“„ <code>docs/WRITING_CRITIQUES.md</code> - è¯„è®ºç¼–å†™æŒ‡å— (393 è¡Œ)</li>
        <li>ğŸ“„ <code>assets/artworks/README.md</code> - æ–‡ä»¶ç»„ç»‡è§„èŒƒ (238 è¡Œ)</li>
        <li>ğŸ“ <code>openspec/changes/implement-multi-image-artwork-series/</code> - å®Œæ•´æŠ€æœ¯è§„èŒƒ</li>
      </ul>
    </section>

    <!-- Next Steps Section -->
    <section class="demo-section">
      <h2>ğŸš€ åç»­è®¡åˆ’</h2>

      <h3>Phase 4: å†…å®¹è¿ç§»</h3>
      <ul>
        <li>ä¸ºæ¯ä»¶è‰ºæœ¯ä½œå“æ”¶é›† 5-10 å¼ å›¾ç‰‡</li>
        <li>åˆ›å»ºå®Œæ•´çš„å›¾ç‰‡å…ƒæ•°æ®ï¼ˆæ ‡é¢˜ã€åˆ†ç±»ã€è¯´æ˜ï¼‰</li>
        <li>æ›´æ–°è¯„è®ºæ·»åŠ æ›´å¤šå›¾ç‰‡å¼•ç”¨</li>
      </ul>

      <h3>Phase 5: æµ‹è¯•ä¸ä¼˜åŒ–</h3>
      <ul>
        <li>è·¨æµè§ˆå™¨æµ‹è¯• (Chrome, Firefox, Safari, Edge)</li>
        <li>ç§»åŠ¨è®¾å¤‡æµ‹è¯• (iOS, Android)</li>
        <li>å¯è®¿é—®æ€§å®¡è®¡ (Lighthouse, ARIA)</li>
        <li>æ€§èƒ½ä¼˜åŒ– (Lazy Loading, Caching)</li>
      </ul>

      <h3>Phase 6: éƒ¨ç½²</h3>
      <ul>
        <li>æ›´æ–°ä¸»é¡µé¢é›†æˆæ‰€æœ‰åŠŸèƒ½</li>
        <li>æ–‡æ¡£æœ€ç»ˆå®¡æŸ¥</li>
        <li>éƒ¨ç½²åˆ° GitHub Pages</li>
        <li>ç›‘æ§å’Œåé¦ˆæ”¶é›†</li>
      </ul>
    </section>
  </div>

  <!-- Load scripts IN ORDER -->
  <script>window.IMMERSIVE_MODE = false;</script>
  <script src="/js/data.js?v=3.2"></script>
  <script src="/js/utils/image-compat.js?v=1.0"></script>
  <script src="/js/utils/critique-parser.js?v=1.0"></script>
  <script src="/js/components/artwork-carousel.js?v=1.0"></script>

  <script>
    (function() {
      'use strict';

      // Wait for DOM ready
      window.addEventListener('DOMContentLoaded', () => {
        console.log('=== VULCA Multi-Image Demo Initialized ===');

        // Initialize Carousel Demo
        initCarouselDemo();

        // Initialize Critique Reference Demo
        initCritiqueDemo();
      });

      /**
       * Initialize Carousel Demo
       */
      function initCarouselDemo() {
        const container = document.getElementById('carousel-demo-container');
        if (!container) return;

        // Get artwork-1
        const artwork = window.VULCA_DATA.artworks.find(a => a.id === 'artwork-1');
        if (!artwork) {
          console.error('âŒ Artwork-1 not found');
          return;
        }

        // Create carousel instance
        const carousel = new window.ArtworkImageCarousel(artwork, container, {
          loop: true,
          preloadAdjacent: true,
          enableKeyboard: true,
          enableTouch: true,
          showMetadata: true,
          showIndicators: true
        });

        // Render carousel
        carousel.render();

        // Highlight image if critique references exist
        const critique = window.VULCA_DATA.critiques.find(c =>
          c.artworkId === 'artwork-1' && c.personaId === 'su-shi'
        );

        if (critique && critique.imageReferences && critique.imageReferences.length > 0) {
          carousel.highlightImages(critique.imageReferences);
          console.log('âœ“ Highlighted images:', critique.imageReferences);
        }

        console.log('âœ“ Carousel demo initialized');
      }

      /**
       * Initialize Critique Reference Demo
       */
      function initCritiqueDemo() {
        const container = document.getElementById('critique-demo-text');
        if (!container) return;

        // Get Su Shi's critique of artwork-1
        const critique = window.VULCA_DATA.critiques.find(c =>
          c.artworkId === 'artwork-1' && c.personaId === 'su-shi'
        );

        if (!critique) {
          console.error('âŒ Critique not found');
          return;
        }

        // Get artwork
        const artwork = window.VULCA_DATA.artworks.find(a => a.id === 'artwork-1');

        // Render critique text with image references
        const renderedText = window.CritiqueParser.renderImageReferences(
          critique.textZh,
          artwork,
          {
            linkClass: 'image-reference-link',
            showImageTitle: true
          }
        );

        container.innerHTML = renderedText;

        // Add click handlers to image reference links
        container.querySelectorAll('.image-reference-link').forEach(link => {
          link.addEventListener('click', (e) => {
            e.preventDefault();
            const imageId = link.dataset.imageId;
            alert(`ç‚¹å‡»äº†å›¾ç‰‡å¼•ç”¨ï¼\n\nImage ID: ${imageId}\n\nåœ¨å®Œæ•´å®ç°ä¸­ï¼Œè¿™å°†ï¼š\n1. å¯¼èˆª Carousel åˆ°å¯¹åº”å›¾ç‰‡\n2. é«˜äº®æ˜¾ç¤ºè¯¥å›¾ç‰‡\n3. å¹³æ»‘æ»šåŠ¨åˆ° Carousel ä½ç½®`);
          });
        });

        console.log('âœ“ Critique demo initialized');
      }
    })();
  </script>
</body>
</html>
